<!-- BEGIN: ACCESS_CLOUD_RUN -->
## Access in Cloud Run (IAM gated UI)

UI URL
```bash
gcloud run services describe wcct-ui --project "decent-surf-467802-h9" --region "us-central1" --format='value(status.url)'

Allowlist a viewer

gcloud run services add-iam-policy-binding wcct-ui \
  --member="user:YOUR_EMAIL" \
  --role="roles/run.invoker" \
  --region "us-central1" --project "decent-surf-467802-h9"

Browser access

gcloud run services proxy wcct-ui --region "us-central1" --project "decent-surf-467802-h9"
# then open http://127.0.0.1:8080

Curl the UI with a token

UI_URL="$(gcloud run services describe wcct-ui --project "decent-surf-467802-h9" --region "us-central1" --format='value(status.url)')"
SA="wcct-ui-sa@decent-surf-467802-h9.iam.gserviceaccount.com"
TOK="$(gcloud auth print-identity-token --impersonate-service-account="$SA" --audiences="$UI_URL")"
curl -s -o /dev/null -w "%{http_code}\n" -H "Authorization: Bearer $TOK" "$UI_URL"

Programmatic API call

API_URL="$(gcloud run services describe wcct-api --project "decent-surf-467802-h9" --region "us-central1" --format='value(status.url)')"
SA="wcct-ui-sa@decent-surf-467802-h9.iam.gserviceaccount.com"
TOK="$(gcloud auth print-identity-token --impersonate-service-account="$SA" --audiences="$API_URL")"
curl -s -H "Authorization: Bearer $TOK" -H "Content-Type: application/json" \
  -d '{"N":64,"steps":400,"omega":1.9}' "$API_URL/solve"

<!-- END: ACCESS_CLOUD_RUN -->


